# ğŸ“„ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆï¼ˆRoamory / PostgreSQLï¼‰

## ğŸ‘¤ usersï¼ˆä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

| ã‚«ãƒ©ãƒ å                | å‹            | è£œè¶³                              |
| ----------------------- | ------------- | --------------------------------- |
| id                      | bigIncrements | ä¸»ã‚­ãƒ¼                            |
| name                    | string        | ãƒ¦ãƒ¼ã‚¶ãƒ¼å                        |
| email                   | string        | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆãƒ¦ãƒ‹ãƒ¼ã‚¯ï¼‰        |
| email_verified_at       | timestamp     | ãƒ¡ãƒ¼ãƒ«ç¢ºèªæ—¥æ™‚                    |
| password                | string        | ãƒãƒƒã‚·ãƒ¥åŒ–ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰        |
| remember_token          | string        | ã‚»ãƒƒã‚·ãƒ§ãƒ³ç”¨ãƒˆãƒ¼ã‚¯ãƒ³              |
| is_premium              | boolean       | èª²é‡‘ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã©ã†ã‹ï¼ˆtrue=èª²é‡‘ï¼‰ |
| created_at / updated_at | timestamps    | ä½œæˆ / æ›´æ–°æ—¥æ™‚                   |

---

## ğŸ‘¤ adminsï¼ˆç®¡ç†ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

| ã‚«ãƒ©ãƒ å                | å‹            | è£œè¶³                       |
| ----------------------- | ------------- | -------------------------- |
| id                      | bigIncrements | ä¸»ã‚­ãƒ¼                     |
| name                    | string        | ç®¡ç†è€…å                   |
| email                   | string        | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆãƒ¦ãƒ‹ãƒ¼ã‚¯ï¼‰ |
| email_verified_at       | timestamp     | ãƒ¡ãƒ¼ãƒ«ç¢ºèªæ—¥æ™‚             |
| password                | string        | ãƒãƒƒã‚·ãƒ¥åŒ–ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ |
| remember_token          | string        | ã‚»ãƒƒã‚·ãƒ§ãƒ³ç”¨ãƒˆãƒ¼ã‚¯ãƒ³       |
| created_at / updated_at | timestamps    | ä½œæˆ / æ›´æ–°æ—¥æ™‚            |

---

## ğŸŒ countriesï¼ˆå›½æƒ…å ±ï¼‰

| ã‚«ãƒ©ãƒ å                | å‹                | è£œè¶³                                                       |
| ----------------------- | ----------------- | ---------------------------------------------------------- |
| id                      | bigIncrements     | ä¸»ã‚­ãƒ¼                                                     |
| name                    | string            | å›½åï¼ˆä¾‹ï¼šJapanï¼‰                                          |
| code                    | string(2)         | ISO 3166-1 alpha-2 ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹ï¼šJPï¼‰                        |
| geojson_url             | string (nullable) | å›½å¢ƒç·š GeoJSON ãƒ•ã‚¡ã‚¤ãƒ«ã® URLï¼ˆS3 ãªã©å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æƒ³å®šï¼‰ |
| created_at / updated_at | timestamps        | ä½œæˆ / æ›´æ–°æ—¥æ™‚                                            |

---

## ğŸ§  travel_plansï¼ˆæ—…è¡Œãƒ—ãƒ©ãƒ³ï¼‰

| ã‚«ãƒ©ãƒ å                | å‹            | è£œè¶³                               |
| ----------------------- | ------------- | ---------------------------------- |
| id                      | bigIncrements | ä¸»ã‚­ãƒ¼                             |
| user_id                 | foreignId     | users ãƒ†ãƒ¼ãƒ–ãƒ«å‚ç…§                 |
| country_id              | foreignId     | countries ãƒ†ãƒ¼ãƒ–ãƒ«å‚ç…§             |
| start_date              | date          | å‡ºç™ºæ—¥                             |
| end_date                | date          | å¸°ç€æ—¥                             |
| budget                  | integer       | äºˆç®—ï¼ˆå˜ä½ï¼šå††ãªã©ï¼‰               |
| must_go_places          | json          | å¿…ãšè¡ŒããŸã„å ´æ‰€ãƒªã‚¹ãƒˆ             |
| plan_json               | json          | âœ… AI å‡ºåŠ›å†…å®¹ï¼ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãªã©ï¼‰ |
| created_at / updated_at | timestamps    | ä½œæˆ / æ›´æ–°æ—¥æ™‚                    |

---

## ğŸ—ºï¸ travel_diariesï¼ˆæ—…è¡Œæ—¥è¨˜ï¼‰

| ã‚«ãƒ©ãƒ å                | å‹             | è£œè¶³               |
| ----------------------- | -------------- | ------------------ |
| id                      | bigIncrements  | ä¸»ã‚­ãƒ¼             |
| user_id                 | foreignId      | users ãƒ†ãƒ¼ãƒ–ãƒ«å‚ç…§ |
| latitude                | decimal(10, 7) | ç·¯åº¦               |
| longitude               | decimal(10, 7) | çµŒåº¦               |
| title                   | string         | æ—¥è¨˜ã‚¿ã‚¤ãƒˆãƒ«       |
| content                 | text           | æ—¥è¨˜æœ¬æ–‡           |
| created_at / updated_at | timestamps     | ä½œæˆ / æ›´æ–°æ—¥æ™‚    |

### ğŸ”— travel_diary_imagesï¼ˆæ—…è¡Œæ—¥è¨˜ã®ç”»åƒï¼‰

| ã‚«ãƒ©ãƒ å                | å‹            | è£œè¶³                                 |
| ----------------------- | ------------- | ------------------------------------ |
| id                      | bigIncrements | ä¸»ã‚­ãƒ¼                               |
| travel_diary_id         | foreignId     | travel_diaries å‚ç…§                  |
| image_path              | string        | ç”»åƒã®ãƒ‘ã‚¹ï¼ˆé–‹ç™ºï¼špublicã€æœ¬ç•ªï¼šS3ï¼‰ |
| created_at / updated_at | timestamps    | ä½œæˆ / æ›´æ–°æ—¥æ™‚                      |

ğŸ“Œ ç”»åƒã¯æœ€å¤§ 4 ä»¶ã¾ã§ï¼ˆã‚¢ãƒ—ãƒªå´ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç­‰ã§åˆ¶å¾¡ï¼‰

---

## ğŸ“ visited_countriesï¼ˆè¨ªå•å›½ï¼‰

| ã‚«ãƒ©ãƒ å                | å‹              | è£œè¶³                                 |
| ----------------------- | --------------- | ------------------------------------ |
| id                      | bigIncrements   | ä¸»ã‚­ãƒ¼                               |
| user_id                 | foreignId       | users ãƒ†ãƒ¼ãƒ–ãƒ«å‚ç…§                   |
| country_id              | foreignId       | countries ãƒ†ãƒ¼ãƒ–ãƒ«å‚ç…§               |
| source_image_path       | string          | ç”»åƒã®ãƒ‘ã‚¹ï¼ˆé–‹ç™ºï¼špublicã€æœ¬ç•ªï¼šS3ï¼‰ |
| detected_info           | json (nullable) | âœ… AI åˆ¤åˆ¥çµæœï¼ˆå»ºé€ ç‰©åãƒ»èª¬æ˜ãªã©ï¼‰ |
| verified_at             | timestamp       | AI ã«ã‚ˆã‚‹ç¢ºèªæ—¥æ™‚                    |
| created_at / updated_at | timestamps      | ä½œæˆ / æ›´æ–°æ—¥æ™‚                      |

---

## âœ… è£œè¶³äº‹é …

- å›½é¸æŠã«ã¯ `countries` ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨ã—ã€ISO ã‚³ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ä»– API é€£æºã«ã‚‚ä¾¿åˆ©ã§ã™ã€‚
- å›½ã®åœ°ç†ãƒãƒªã‚´ãƒ³ï¼ˆå›½å¢ƒç·š GeoJSONï¼‰ã¯ `countries.geojson_url` ã§ç®¡ç†ã—ã€Leaflet ã§ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤ºã«åˆ©ç”¨ã—ã¾ã™ã€‚
- AI å‡ºåŠ›å†…å®¹ï¼ˆæ—…è¡Œãƒ—ãƒ©ãƒ³ã€ç”»åƒåˆ¤åˆ¥çµæœãªã©ï¼‰ã¯ `json` ã‚«ãƒ©ãƒ ã§ä¿å­˜ã—ã¾ã™ã€‚
- ç”»åƒãƒ‘ã‚¹ã¯ **é–‹ç™ºç’°å¢ƒï¼š`public/`ã€æœ¬ç•ªç’°å¢ƒï¼šS3** ã‚’ä½¿ã„åˆ†ã‘ã¾ã™ã€‚
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®èª²é‡‘çŠ¶æ…‹ã¯ `users.is_premium` ã§ç®¡ç†ã—ã€åœ°å›³è¡¨ç¤ºã¯èª²é‡‘çŠ¶æ…‹ã«å¿œã˜ã¦ Leafletï¼ˆç„¡æ–™ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã¾ãŸã¯ Mapbox GL JSï¼ˆèª²é‡‘ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã‚’ä½¿ã„åˆ†ã‘ã¾ã™ã€‚
